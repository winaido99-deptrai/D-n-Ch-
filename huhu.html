<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>D√¢n ch·ªß v√† s·ª± ra ƒë·ªùi, ph√°t tri·ªÉn c·ªßa d√¢n ch·ªß</title>
  <meta name="description" content="B√†i h·ªçc m·ªôt trang v·ªÅ D√¢n ch·ªß: kh√°i ni·ªám, l·ªãch s·ª≠ ph√°t tri·ªÉn, th·ª±c ti·ªÖn Vi·ªát Nam v√† tr√≤ ch∆°i t∆∞∆°ng t√°c." />
  <style>
    :root{
      --ink:#0F172A; --bg:#F8FAFC; --card:#FFFFFF; --accent:#06B6D4;
      --muted:#64748B; --ring:#A5F3FC; --radius:14px;
      --shadow:0 10px 18px rgba(15,23,42,.06), 0 2px 4px rgba(15,23,42,.04);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);scroll-behavior:smooth}
    /* To√†n site Times New Roman */
    body{font:16px/1.6 "Times New Roman", Times, serif}
    h1,h2,h3{font-family:"Times New Roman", Times, serif}
    h1{font-size:clamp(26px,4vw,40px);margin:0 0 6px}
    h2{font-size:clamp(22px,3vw,30px);margin:0 0 12px}
    h3{font-size:clamp(18px,2.2vw,22px);margin:10px 0}
    p{margin:8px 0}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}

    /* Header */
    .header{position:sticky;top:0;background:#fff;z-index:50;border-bottom:1px solid #e5e7eb;backdrop-filter:saturate(140%) blur(6px)}
    .nav{max-width:1120px;margin:auto;display:flex;align-items:center;justify-content:space-between;padding:12px 18px;gap:10px}
    .brand{font-weight:800;letter-spacing:.2px}
    .menu{display:flex;gap:14px;flex-wrap:wrap}
    .menu a{padding:8px 10px;border-radius:10px;font-weight:600;color:var(--ink)}
    .menu a:hover{background:rgba(6,182,212,.12);color:var(--ink)}

    /* sections */
    .section{max-width:1120px;margin:30px auto;padding:18px}
    .grid-2{display:grid;grid-template-columns:1.1fr 1fr;gap:22px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;border:1px solid #eef2f7}
    .note{padding:10px 12px;border-left:4px solid var(--accent);background:#ECFEFF;border-radius:10px}

    /* timeline cards */
    .timeline{display:grid;grid-template-columns:repeat(5,1fr);gap:12px}
    .t-card{background:#fff;border:1px solid #e8eef5;border-radius:12px;padding:12px;text-align:center;box-shadow:var(--shadow)}

    /* table compare */
    table{width:100%;border-collapse:collapse;margin-top:10px;border-radius:12px;overflow:hidden}
    th,td{border:1px solid #e5e7eb;padding:10px;text-align:center}
    th{background:var(--accent);color:#fff}

    /* quiz */
    .q-item{margin:10px 0;padding:12px;border:1px solid #e8eef5;border-radius:12px;background:#fff}
    .q-actions{display:flex;gap:10px;margin-top:10px}
    .badge{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px;background:#cffafe;color:#0c4a6e}
    .explain{font-size:14px;color:var(--muted);margin-top:6px}

    /* drag & drop */
    .drag-wrap{display:grid;grid-template-columns:1fr;gap:14px}
    .drags{display:flex;flex-wrap:wrap;gap:10px}
    .drag{padding:10px 12px;background:var(--accent);color:#00313a;border-radius:12px;cursor:grab;user-select:none;font-weight:700;border:1px solid #0891b2;box-shadow:0 6px 12px rgba(6,182,212,.25)}
    .drag:active{cursor:grabbing}
    .drops{display:grid;grid-template-columns:repeat(5,1fr);gap:10px}
    .drop{min-height:58px;border:2px dashed var(--accent);border-radius:12px;background:#F0FDFA;display:flex;align-items:center;justify-content:center;font-weight:700;color:#0c4a6e}
    .drop.filled{border-style:solid;background:#fff}

    /* Final puzzle */
    .puzzle-wrap{position:relative;border-radius:16px;overflow:hidden;border:1px solid #e8eef5;box-shadow:var(--shadow)}
    .puzzle-bg{background-image:url('https://upload.wikimedia.org/wikipedia/commons/0/0d/National_Assembly_of_Vietnam_building_Hanoi_2018.jpg');background-size:cover;background-position:center;height:240px;filter:saturate(105%)}
    .mask5{position:absolute;inset:0;display:grid;grid-template-columns:repeat(5,1fr);gap:6px;padding:6px}
    .tile{background:linear-gradient(180deg,#06B6D4,#0891b2);border-radius:10px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;cursor:pointer;box-shadow:0 8px 16px rgba(6,182,212,.25)}
    .tile.open{background:transparent;box-shadow:none;pointer-events:none}
    .tile:hover{filter:brightness(.95)}
    .q-modal{position:fixed;inset:0;background:rgba(15,23,42,.42);display:none;align-items:center;justify-content:center;padding:16px;z-index:60}
    .q-modal .sheet{background:#fff;max-width:560px;width:100%;border-radius:16px;box-shadow:var(--shadow);padding:16px}
    .choices{display:grid;gap:8px;margin-top:8px}
    .choices button{text-align:left;border:1px solid #e6eef6;background:#fff;border-radius:12px;padding:10px;font-weight:600;cursor:pointer}
    .choices button:hover{border-color:var(--accent);box-shadow:0 0 0 4px var(--ring)}
    .row-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{border:0;padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer}
    .btn.primary{background:var(--accent);color:#00313a}
    .btn.ghost{background:#fff;border:1px solid #e5e7eb}
    .center{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
    .score{font-weight:800}

    /* footer */
    .footer{padding:24px;text-align:center;color:#e6faff;background:#0F172A;margin-top:30px}
    .footer a{color:#67e8f9}

    /* responsive */
    @media (max-width:920px){.grid-2{grid-template-columns:1fr}.timeline{grid-template-columns:repeat(2,1fr)}.drops{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:520px){.timeline{grid-template-columns:1fr}.drops{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <nav class="nav">
      <div class="brand">D√ÇN CH·ª¶ ‚Äî B√ÄI H·ªåC</div>
      <div class="menu">
        <a href="#mo-dau">M·ªü ƒë·∫ßu</a>
        <a href="#khai-niem">Kh√°i ni·ªám</a>
        <a href="#lich-su">L·ªãch s·ª≠</a>
        <a href="#thuc-tien-vn">Th·ª±c ti·ªÖn VN</a>
        <a href="#tro-choi">Tr√≤ ch∆°i</a>
      </div>
    </nav>
  </header>

  <!-- KI·∫æN TH·ª®C TR∆Ø·ªöC: 1) M·ªü ƒë·∫ßu -->
  <section id="mo-dau" class="section">
    <div class="grid-2">
      <div class="card">
        <h1>D√¢n ch·ªß v√† s·ª± ra ƒë·ªùi, ph√°t tri·ªÉn c·ªßa d√¢n ch·ªß</h1>
        <p><strong>D√¢n ch·ªß</strong> = <em>demos</em> + <em>kratos</em> = quy·ªÅn l·ª±c nh√¢n d√¢n.</p>
        <p>M√°c‚ÄìL√™nin: d√¢n ch·ªß v·ª´a l√† m·ª•c ti√™u, v·ª´a l√† ƒë·ªông l·ª±c.</p>
        <p>H·ªì Ch√≠ Minh: ‚ÄúN∆∞·ªõc ta l√† n∆∞·ªõc d√¢n ch·ªß, ƒë·ªãa v·ªã cao nh·∫•t l√† d√¢n, v√¨ d√¢n l√† ch·ªß.‚Äù</p>
        <div class="note"><strong>Key takeaway:</strong> D√¢n ch·ªß l√† gi√° tr·ªã ph·ªï qu√°t.</div>
      </div>
      <div class="card">
        <h3>M·ª•c ti√™u h·ªçc</h3>
        <ul>
          <li>N·∫Øm kh√°i ni·ªám v√† b·∫£n ch·∫•t c·ªßa d√¢n ch·ªß.</li>
          <li>Hi·ªÉu ti·∫øn tr√¨nh h√¨nh th√†nh & ph√°t tri·ªÉn qua c√°c h√¨nh th√°i x√£ h·ªôi.</li>
          <li>Li√™n h·ªá th·ª±c ti·ªÖn Vi·ªát Nam hi·ªán nay.</li>
          <li>C·ªßng c·ªë b·∫±ng b√†i t·∫≠p t∆∞∆°ng t√°c (ph·∫ßn Tr√≤ ch∆°i).</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- 2) Kh√°i ni·ªám -->
  <section id="khai-niem" class="section">
    <div class="card">
      <h2>Kh√°i ni·ªám d√¢n ch·ªß</h2>
      <p>M√°c‚ÄìL√™nin: quy·ªÅn l·ª±c thu·ªôc v·ªÅ nh√¢n d√¢n; nguy√™n t·∫Øc t·∫≠p trung d√¢n ch·ªß.</p>
      <p>H·ªì Ch√≠ Minh: ‚Äúd√¢n l√† ch·ªß‚Äù & ‚Äúd√¢n l√†m ch·ªß‚Äù.</p>
      <p>D√¢n ch·ªß l√† quy·ªÅn con ng∆∞·ªùi, t·ªìn t·∫°i c√πng vƒÉn minh nh√¢n lo·∫°i.</p>
      <div class="note"><strong>Key takeaway:</strong> D√¢n ch·ªß = quy·ªÅn l·ª±c c·ªßa d√¢n + c∆° ch·∫ø b·∫£o ƒë·∫£m d√¢n l√†m ch·ªß.</div>
    </div>
  </section>

  <!-- 3) L·ªãch s·ª≠ + B·∫£ng so s√°nh -->
  <section id="lich-su" class="section">
    <div class="card">
      <h2>S·ª± ra ƒë·ªùi v√† ph√°t tri·ªÉn c·ªßa d√¢n ch·ªß</h2>
      <p><strong>C√°c giai ƒëo·∫°n:</strong> Nguy√™n th·ªßy ‚Üí Ch·ªß n√¥ ‚Üí Phong ki·∫øn ‚Üí T∆∞ s·∫£n ‚Üí XHCN.</p>
      <div class="timeline" style="margin-top:12px">
        <div class="t-card">Nguy√™n th·ªßy ‚Äì h·ªôi ƒë·ªìng b·ªô l·∫°c</div>
        <div class="t-card">Ch·ªß n√¥ ‚Äì Hy L·∫°p c·ªï ƒë·∫°i (Athen)</div>
        <div class="t-card">Phong ki·∫øn ‚Äì ngai v√†ng vua ch√∫a</div>
        <div class="t-card">T∆∞ s·∫£n ‚Äì C√°ch m·∫°ng Ph√°p/M·ªπ</div>
        <div class="t-card">XHCN ‚Äì C√°ch m·∫°ng Th√°ng M∆∞·ªùi Nga</div>
      </div>
    </div>

    <div class="card">
      <h3>B·∫£ng so s√°nh: D√¢n ch·ªß t∆∞ s·∫£n vs D√¢n ch·ªß XHCN</h3>
      <table>
        <tr>
          <th>Ti√™u ch√≠</th>
          <th>D√¢n ch·ªß t∆∞ s·∫£n</th>
          <th>D√¢n ch·ªß XHCN</th>
        </tr>
        <tr>
          <td>C∆° s·ªü kinh t·∫ø</td>
          <td>S·ªü h·ªØu t∆∞ nh√¢n TLSX</td>
          <td>S·ªü h·ªØu to√†n d√¢n, t·∫≠p th·ªÉ v·ªÅ TLSX ch·ªß y·∫øu</td>
        </tr>
        <tr>
          <td>Ch·ªß th·ªÉ quy·ªÅn l·ª±c</td>
          <td>Giai c·∫•p t∆∞ s·∫£n c·∫ßm quy·ªÅn</td>
          <td>Nh√¢n d√¢n lao ƒë·ªông</td>
        </tr>
        <tr>
          <td>Tr·ªçng t√¢m</td>
          <td>T·ª± do c√° nh√¢n, ph√°p quy·ªÅn h√¨nh th·ª©c</td>
          <td>B√¨nh ƒë·∫≥ng, c√¥ng b·∫±ng x√£ h·ªôi, th·ª±c ch·∫•t</td>
        </tr>
        <tr>
          <td>R·ªßi ro</td>
          <td>B·∫•t b√¨nh ƒë·∫≥ng, l·ª£i √≠ch nh√≥m</td>
          <td>Quan li√™u, h√¨nh th·ª©c n·∫øu thi·∫øu ki·ªÉm so√°t</td>
        </tr>
        <tr>
          <td>M·ª•c ti√™u</td>
          <td>B·∫£o v·ªá tr·∫≠t t·ª± t∆∞ h·ªØu</td>
          <td>Gi·∫£i ph√≥ng con ng∆∞·ªùi, v√¨ ƒëa s·ªë nh√¢n d√¢n</td>
        </tr>
      </table>
    </div>
  </section>

  <!-- 4) Th·ª±c ti·ªÖn Vi·ªát Nam -->
  <section id="thuc-tien-vn" class="section">
    <div class="card">
      <h2>Li√™n h·ªá th·ª±c ti·ªÖn Vi·ªát Nam</h2>
      <p>Hi·∫øn ph√°p 2013: ‚ÄúT·∫•t c·∫£ quy·ªÅn l·ª±c nh√† n∆∞·ªõc thu·ªôc v·ªÅ nh√¢n d√¢n.‚Äù</p>
      <p>Th·ª±c hi·ªán: b·∫ßu c·ª≠ QH/HƒêND, ti·∫øp x√∫c c·ª≠ tri, ph·∫£n bi·ªán x√£ h·ªôi, quy ch·∫ø d√¢n ch·ªß ·ªü c∆° s·ªü.</p>
      <p>Chuy·ªÉn ƒë·ªïi s·ªë: d·ªãch v·ª• c√¥ng tr·ª±c tuy·∫øn, c√¥ng khai ng√¢n s√°ch, k√™nh g√≥p √Ω.</p>
      <div class="note"><strong>Key takeaway:</strong> Minh b·∫°ch ‚Äì tr√°ch nhi·ªám gi·∫£i tr√¨nh ‚Äì nh√¢n d√¢n tham gia.</div>
    </div>
  </section>

  <!-- ======= SAU KHI H·ªåC XONG: TR√í CH∆†I ======= -->
  <section id="tro-choi" class="section">
    <!-- Quiz ƒê√∫ng/Sai -->
    <div class="card" id="quiz1">
      <div class="center" style="justify-content:space-between">
        <h3>Mini game 1 ‚Äî Quiz ƒê√∫ng/Sai (6 c√¢u)</h3>
        <span class="badge">Ch·ªçn ƒë√°p √°n r·ªìi b·∫•m ‚ÄúN·ªôp b√†i‚Äù</span>
      </div>
      <div id="quizList"></div>
      <div class="row-actions">
        <button class="btn primary" id="submitQuiz">N·ªôp b√†i</button>
        <button class="btn ghost" id="resetQuiz">L√†m l·∫°i</button>
        <span class="score" id="quizScore"></span>
      </div>
    </div>

    <!-- Drag & Drop Timeline (kh√¥ng l·ªô ƒë√°p √°n) -->
    <div class="card">
      <h3>Mini game 2 ‚Äî K√©o th·∫£ s·∫Øp x·∫øp Timeline</h3>
      <p>X·∫øp 5 giai ƒëo·∫°n theo ƒë√∫ng tr√¨nh t·ª± l·ªãch s·ª≠. .</p>
      <div class="drag-wrap">
        <div class="drags" id="dragItems"></div>
        <div class="drops" id="dropZones"></div>
      </div>
      <div class="row-actions">
        <button class="btn primary" id="checkOrderBtn">Ki·ªÉm tra</button>
        <button class="btn ghost" id="resetOrderBtn">L√†m l·∫°i</button>
        <span class="score" id="orderScore"></span>
      </div>
    </div>

    <!-- Game t·ªïng h·ª£p 5 m·∫£nh -->
    <div class="card">
      <h3>Mini game t·ªïng h·ª£p ‚Äî M·ªü ·∫£nh </h3>
      <div class="center" style="justify-content:space-between">
        <p>Ch·ªçn t·ª´ng m·∫£nh ƒë·ªÉ tr·∫£ l·ªùi tr·∫Øc nghi·ªám. M·ªói c√¢u ƒë√∫ng m·ªü 1 m·∫£nh. M·ªü ƒë·ªß 5 m·∫£nh ƒë·ªÉ ho√†n th√†nh.</p>
        <div class="center">
                 
        </div>
      </div>
      <div class="puzzle-wrap" style="margin-top:12px">
        <div class="puzzle-bg" id="puzzleBg"></div>
        <div class="mask5" id="mask5"></div>
      </div>
      <div class="row-actions">
        <button class="btn primary" id="resetFinal">L√†m l·∫°i</button>
        <span class="score" id="finalScore"></span>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div>¬© B√†i h·ªçc: D√¢n ch·ªß v√† s·ª± ra ƒë·ªùi, ph√°t tri·ªÉn c·ªßa d√¢n ch·ªß ‚Ä¢ Thi·∫øt k·∫ø responsive, tr√≤ ch∆°i t∆∞∆°ng t√°c</div>
  </footer>

  <!-- Modal h·ªèi ƒë√°p cho game cu·ªëi -->
  <div class="q-modal" id="modal">
    <div class="sheet">
      <h3 id="modalQ">C√¢u h·ªèi</h3>
      <div class="choices" id="modalChoices"></div>
      <div class="row-actions" style="justify-content:flex-end"><button class="btn ghost" id="closeModal">ƒê√≥ng</button></div>
    </div>
  </div>

  <script>
    /* ===== QUIZ ƒê√öNG/SAI (6 c√¢u) ===== */
    const quizData = [
      { text: "Theo Hy L·∫°p c·ªï ƒë·∫°i, d√¢n ch·ªß nghƒ©a l√† nh√¢n d√¢n cai tr·ªã.", correct: true,  explain: "T·ª´ g·ªëc Hy L·∫°p: demos (nh√¢n d√¢n) + kratos (quy·ªÅn l·ª±c)." },
      { text: "H·ªì Ch√≠ Minh cho r·∫±ng d√¢n ch·ªß ch·ªâ gi·ªõi h·∫°n trong ch√≠nh tr·ªã.", correct: false, explain: "Ng∆∞·ªùi nh·∫•n m·∫°nh d√¢n ch·ªß trong m·ªçi lƒ©nh v·ª±c ƒë·ªùi s·ªëng, kinh t·∫ø‚Äìx√£ h·ªôi‚ÄìvƒÉn h√≥a." },
      { text: "Theo M√°c‚ÄìL√™nin, d√¢n ch·ªß l√† quy·ªÅn l·ª±c thu·ªôc v·ªÅ nh√¢n d√¢n.", correct: true,  explain: "B·∫£n ch·∫•t d√¢n ch·ªß XHCN: quy·ªÅn l·ª±c th·ª±c s·ª± thu·ªôc v·ªÅ nh√¢n d√¢n lao ƒë·ªông." },
      { text: "D√¢n ch·ªß t∆∞ s·∫£n ph·ª•c v·ª• to√†n th·ªÉ nh√¢n d√¢n lao ƒë·ªông.", correct: false, explain: "Trong l·ªãch s·ª≠, d√¢n ch·ªß t∆∞ s·∫£n g·∫Øn v·ªõi quy·ªÅn l·ª±c c·ªßa giai c·∫•p t∆∞ s·∫£n." },
      { text: "D√¢n ch·ªß XHCN ra ƒë·ªùi t·ª´ C√°ch m·∫°ng Th√°ng M∆∞·ªùi Nga 1917.", correct: true,  explain: "S·ª± ki·ªán 1917 m·ªü ra h√¨nh th√°i d√¢n ch·ªß m·ªõi ‚Äì d√¢n ch·ªß XHCN." },
      { text: "Hi·∫øn ph√°p 2013 kh·∫≥ng ƒë·ªãnh quy·ªÅn l·ª±c nh√† n∆∞·ªõc thu·ªôc v·ªÅ nh√¢n d√¢n.", correct: true,  explain: "ƒêi·ªÅu 2 Hi·∫øn ph√°p 2013 x√°c ƒë·ªãnh r√µ nguy√™n t·∫Øc n√†y." }
    ];

    const quizList = document.getElementById('quizList');
    const quizScore = document.getElementById('quizScore');
    const submitQuiz = document.getElementById('submitQuiz');
    const resetQuiz = document.getElementById('resetQuiz');

    function renderQuiz(){
      quizList.innerHTML = "";
      quizData.forEach((q, i)=>{
        const div = document.createElement('div');
        div.className = 'q-item';
        div.innerHTML = `
          <div><strong>${i+1}.</strong> ${q.text}</div>
          <div class="q-actions">
            <label><input type="radio" name="q${i}" value="true"> ƒê√∫ng</label>
            <label><input type="radio" name="q${i}" value="false"> Sai</label>
          </div>
          <div class="explain" id="exp${i}" style="display:none"></div>
        `;
        quizList.appendChild(div);
      });
      quizScore.textContent = "";
    }
    renderQuiz();

    submitQuiz.addEventListener('click', ()=>{
      let score = 0;
      quizData.forEach((q,i)=>{
        const chosen = document.querySelector(`input[name="q${i}"]:checked`);
        const exp = document.getElementById(`exp${i}`);
        if(chosen){
          const isRight = (chosen.value === String(q.correct));
          if(isRight) score++;
          exp.style.display = 'block';
          exp.innerHTML = isRight ? `‚úÖ Ch√≠nh x√°c. ${q.explain}` : `‚ùå Ch∆∞a ƒë√∫ng. ${q.explain}`;
        } else {
          exp.style.display = 'block';
          exp.innerHTML = `‚ö†Ô∏è B·∫°n ch∆∞a ch·ªçn ƒë√°p √°n. ${q.explain}`;
        }
      });
      quizScore.textContent = `K·∫øt qu·∫£: ${score}/${quizData.length}`;
    });

    resetQuiz.addEventListener('click', renderQuiz);

    /* ===== DRAG & DROP TIMELINE (kh√¥ng l·ªô ƒë√°p √°n) ===== */
    const correctOrder = ["Nguy√™n th·ªßy","Ch·ªß n√¥","Phong ki·∫øn","T∆∞ s·∫£n","XHCN"];
    const dragItems = document.getElementById('dragItems');
    const dropZones = document.getElementById('dropZones');
    const orderScore = document.getElementById('orderScore');
    const checkOrderBtn = document.getElementById('checkOrderBtn');
    const resetOrderBtn = document.getElementById('resetOrderBtn');

    function shuffle(arr){
      const a = [...arr];
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i],a[j]] = [a[j],a[i]];
      }
      return a;
    }

    function renderDragDrop(){
      dragItems.innerHTML = "";
      dropZones.innerHTML = "";

      // Th·∫ª ngu·ªìn: x√°o tr·ªôn n·ªôi dung
      shuffle(correctOrder).forEach(text=>{
        const el = document.createElement('div');
        el.className = 'drag';
        el.draggable = true;
        el.textContent = text;
        dragItems.appendChild(el);
      });

      // √î ƒë√≠ch: c≈©ng x√°o tr·ªôn v·ªã tr√≠, kh√¥ng ghi g·ª£i √Ω
      shuffle([1,2,3,4,5]).forEach(()=>{
        const z = document.createElement('div');
        z.className = 'drop';
        dropZones.appendChild(z);
      });

      addDnDHandlers();
      orderScore.textContent = "";
    }

    function addDnDHandlers(){
      let dragging = null;
      dragItems.querySelectorAll('.drag').forEach(d=>{
        d.addEventListener('dragstart', e=>{ dragging = d; e.dataTransfer.setData('text/plain', d.textContent); });
        d.addEventListener('dragend', ()=>{ dragging = null; });
      });
      document.querySelectorAll('.drop').forEach(zone=>{
        zone.addEventListener('dragover', e=>{ e.preventDefault(); });
        zone.addEventListener('drop', e=>{
          e.preventDefault();
          if(!dragging) return;
          if(zone.children.length>0 && zone.classList.contains('filled')) return;
          zone.innerHTML = "";
          zone.appendChild(dragging);
          zone.classList.add('filled');
        });
      });
    }
    renderDragDrop();

    checkOrderBtn.addEventListener('click', ()=>{
      // ƒê·ªçc theo th·ª© t·ª± c√°c √¥ (t·ª´ tr√°i sang ph·∫£i) v√† so v·ªõi correctOrder
      const picked = [...dropZones.children].map(z=> z.querySelector('.drag')?.textContent || "");
      let correct = 0;
      for(let i=0;i<5;i++) if(picked[i]===correctOrder[i]) correct++;
      orderScore.textContent = `ƒê√∫ng ${correct}/5 v·ªã tr√≠`;
    });

    resetOrderBtn.addEventListener('click', renderDragDrop);

    /* ===== GAME CU·ªêI: 5 M·∫¢NH CHE + TR·∫ÆC NGHI·ªÜM ===== */
    const finalQuestions = [
      { tile: 1, q: "‚ÄúD√¢n ch·ªß ch·ªß n√¥‚Äù xu·∫•t hi·ªán trong x√£ h·ªôi n√†o?", choices: ["Chi·∫øm h·ªØu n√¥ l·ªá","C·ªông s·∫£n nguy√™n th·ªßy","Phong ki·∫øn","T∆∞ b·∫£n ch·ªß nghƒ©a"], correctIdx: 0 },
      { tile: 2, q: "N·ªÅn kinh t·∫ø g·∫Øn v·ªõi d√¢n ch·ªß t∆∞ s·∫£n l√† g√¨?", choices: ["S·ªü h·ªØu to√†n d√¢n TLSX","S·ªü h·ªØu t·∫≠p th·ªÉ TLSX","S·ªü h·ªØu t∆∞ nh√¢n TLSX","Kinh t·∫ø t·ª± cung t·ª± c·∫•p"], correctIdx: 2 },
      { tile: 3, q: "C√°ch m·∫°ng n√†o ƒë√°nh d·∫•u s·ª± ra ƒë·ªùi c·ªßa d√¢n ch·ªß XHCN?", choices: ["C√°ch m·∫°ng Ph√°p 1789","C√°ch m·∫°ng M·ªπ 1776","Th√°ng M∆∞·ªùi Nga 1917","C√°ch m·∫°ng C√¥ng nghi·ªáp"], correctIdx: 2 },
      { tile: 4, q: "Theo H·ªì Ch√≠ Minh, ƒë·ªãa v·ªã cao nh·∫•t thu·ªôc v·ªÅ ai?", choices: ["Nh√† n∆∞·ªõc","Nh√¢n d√¢n","Qu·ªëc h·ªôi","Ch√≠nh ph·ªß"], correctIdx: 1 },
      { tile: 5, q: "Hi·∫øn ph√°p 2013 kh·∫≥ng ƒë·ªãnh ƒëi·ªÅu g√¨?", choices: ["Tam quy·ªÅn ph√¢n l·∫≠p tuy·ªát ƒë·ªëi","Quy·ªÅn l·ª±c thu·ªôc Nh√¢n d√¢n","T∆∞ h·ªØu tuy·ªát ƒë·ªëi","B·∫ßu c·ª≠ gi√°n ti·∫øp to√†n b·ªô"], correctIdx: 1 }
    ];

    const mask5 = document.getElementById('mask5');
    const finalScore = document.getElementById('finalScore');
    const resetFinal = document.getElementById('resetFinal');
    const modal = document.getElementById('modal');
    const modalQ = document.getElementById('modalQ');
    const modalChoices = document.getElementById('modalChoices');
    const closeModal = document.getElementById('closeModal');
    const puzzleBg = document.getElementById('puzzleBg');
    const imgUrl = document.getElementById('imgUrl');
    const changeImg = document.getElementById('changeImg');

    let opened = new Set();

    function renderTiles(){
      mask5.innerHTML = "";
      for(let i=1;i<=5;i++){
        const t = document.createElement('div');
        t.className = 'tile';
        t.dataset.tile = i;
        t.textContent = `M·∫£nh ${i}`;
        t.addEventListener('click', ()=> openQuestion(i));
        mask5.appendChild(t);
      }
      opened.clear();
      finalScore.textContent = "";
    }
    renderTiles();

    function openQuestion(tileNum){
      const data = finalQuestions.find(x=>x.tile===tileNum);
      if(!data) return;
      modalQ.textContent = data.q;
      modalChoices.innerHTML = "";
      data.choices.forEach((c, idx)=>{
        const btn = document.createElement('button');
        btn.textContent = c;
        btn.addEventListener('click', ()=>{
          if(idx === data.correctIdx){
            const tile = [...mask5.children][tileNum-1];
            tile.classList.add('open');
            opened.add(tileNum);
            finalScore.textContent = `ƒê√£ m·ªü: ${opened.size}/5 m·∫£nh`;
            modal.style.display = 'none';
            if(opened.size===5){
              setTimeout(()=> alert("üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ m·ªü to√†n b·ªô ·∫£nh Qu·ªëc h·ªôi Vi·ªát Nam!"), 80);
            }
          } else {
            btn.style.borderColor = "#ef4444";
            btn.style.boxShadow = "0 0 0 4px rgba(239,68,68,.2)";
          }
        });
        modalChoices.appendChild(btn);
      });
      modal.style.display = 'flex';
    }

    closeModal.addEventListener('click', ()=> modal.style.display='none');
    modal.addEventListener('click', (e)=>{ if(e.target===modal) modal.style.display='none'; });
    resetFinal.addEventListener('click', renderTiles);

    // ƒê·ªïi ·∫£nh n·ªÅn b·∫±ng URL ng∆∞·ªùi d√πng nh·∫≠p
    changeImg.addEventListener('click', ()=>{
      const url = imgUrl.value.trim();
      if(url){ puzzleBg.style.backgroundImage = `url('${url}')`; }
    });
  </script>
</body>
</html>